<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Smart Exam Pro</title>
  <link rel="stylesheet" href="style.css"/>

  <!-- File import libs -->
  <script src="https://cdn.jsdelivr.net/npm/mammoth@1.6.0/mammoth.browser.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@4.7.76/build/pdf.min.js"></script>
  <script>
    if (window.pdfjsLib) {
      pdfjsLib.GlobalWorkerOptions.workerSrc =
        "https://cdn.jsdelivr.net/npm/pdfjs-dist@4.7.76/build/pdf.worker.min.js";
    }
  </script>

  <!-- PDF export lib -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</head>
<body>
  <header class="navbar">
    <div class="brand">
      <div class="logo-dot"></div>
      <span>Smart Exam Pro</span>
    </div>
    <div class="actions">
      <button id="theme-toggle" class="icon-btn" title="Toggle theme">üåó</button>
    </div>
  </header>

  <main class="main">
    <!-- Student Info -->
    <section id="student-section" class="card fade-in">
      <h2>üë§ Student Information</h2>
      <p class="muted">Please enter your details to begin.</p>
      <div class="grid">
        <label>Full Name <span class="req">*</span>
          <input id="student-name" type="text" placeholder="e.g., Waseem Khallaf" required />
        </label>
        <label>Email / ID (optional)
          <input id="student-id" type="text" placeholder="e.g., waseem@example.com or 2025-0012" />
        </label>
      </div>
      <button id="continue-btn" class="primary-btn">Continue</button>
    </section>

    <!-- Input -->
    <section id="input-section" class="card hidden fade-in">
      <h2>üìÑ Create Your Exam</h2>
      <p>Paste MCQs in this format or use ‚ÄúImport from file‚Äù. Unlimited options (A‚ÄìZ) are OK.</p>
      <pre class="format-example">
Q1: What does HTML stand for?
A) Hyperlinks and Text Markup Language
B) Hyper Text Markup Language
C) Home Tool Markup Language
D) Hyperlinking Textual Management Language
E) (Optional extra option)
Answer: B
Explanation: Short explanation here.
      </pre>

      <div class="row" style="gap:8px;flex-wrap:wrap">
        <input id="file-input" type="file"
               accept=".txt,.docx,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf"
               hidden />
        <button id="import-btn" class="secondary-btn" type="button">Import from file (.txt / .docx / .pdf)</button>
        <span id="import-status" class="muted" aria-live="polite"></span>
      </div>

      <textarea id="mcq-input" placeholder="Paste your MCQs here..."></textarea>

      <div class="row">
        <label class="checkbox">
          <input id="save-locally" type="checkbox" checked />
          <span>Remember my name and theme on this device</span>
        </label>
      </div>
      <button id="generate-btn" class="primary-btn" type="button">Generate Exam</button>
    </section>

    <!-- Exam -->
    <section id="exam-section" class="card hidden fade-in">
      <div class="exam-header">
        <div>
          <h2>üìÉ Exam for <span id="student-name-live"></span></h2>
          <p class="muted">Select one answer for each question.</p>
        </div>
        <div class="progress-bar" aria-label="Progress">
          <div id="progress-fill" class="progress-fill"></div>
        </div>
      </div>
      <form id="exam-form"></form>
      <div class="actions-row">
        <button id="submit-btn" class="primary-btn" type="button">Submit Answers</button>
        <button id="cancel-btn" class="secondary-btn" type="button">Back</button>
      </div>
    </section>

    <!-- Results -->
    <section id="result-section" class="card hidden fade-in">
      <h2>üìù Exam Results</h2>
      <div class="result-top">
        <div class="ring" id="score-ring">
          <div class="ring-inner">
            <div id="score-percent">0%</div>
          </div>
        </div>
        <div class="result-meta">
          <div class="kv"><span>Student:</span><strong id="student-name-result"></strong></div>
          <div class="kv"><span>Questions:</span><strong id="q-count"></strong></div>
          <div class="kv"><span>Correct:</span><strong id="q-correct"></strong></div>
          <div class="kv"><span>Wrong:</span><strong id="q-wrong"></strong></div>
        </div>
      </div>

      <div class="card" style="margin-top:16px">
        <h3 style="margin:0 0 8px">Export options</h3>
        <div class="grid" style="grid-template-columns: 1fr 1fr">
          <label>Scope
            <select id="export-scope">
              <option value="all">All questions</option>
              <option value="wrong">Wrong answers only</option>
            </select>
          </label>
          <label>
            <span>Include correct answers & explanations</span>
            <div class="row">
              <input id="export-include-answers" type="checkbox" checked />
              <span class="muted">If unchecked, PDF won‚Äôt reveal answers</span>
            </div>
          </label>
        </div>
        <div class="row" style="margin-top:8px">
          <button id="export-pdf-btn" class="secondary-btn" type="button">Export Results to PDF</button>
          <span class="muted" id="export-status" aria-live="polite"></span>
        </div>
      </div>

      <hr/>
      <div id="analysis"></div>

      <div class="actions-row">
        <button id="retest-wrong-btn" class="primary-btn" type="button">Retest Wrong Only</button>
        <button id="retry-btn" class="secondary-btn" type="button">Retry Full Exam</button>
        <button id="back-btn" class="secondary-btn" type="button">Create New Exam</button>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>üìÉ <span id="year"></span> Smart Exam Pro üìÑ Built for learning</p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
